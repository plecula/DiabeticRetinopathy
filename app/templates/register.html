<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rejestracja</title>

  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style2.css') }}">
</head>
<body>

<header class="main-header">
  <img id="menuIcon" onclick="toggleMenu()" src="{{ url_for('static', filename='IMG/burger.svg') }}" alt="menu" class="icon">

  <div class="header-buttons">
    {% if current_user.is_authenticated %}
      <div class="user-greeting">
        <div class="avatar-circle-header">
          {{ (current_user.name or current_user.email)[0]|upper }}
        </div>
        <span class="greeting-text">
          Cześć, {{ current_user.name or current_user.email }}!
        </span>
        <a href="{{ url_for('logout') }}" class="btn btn-outline">Wyloguj</a>
      </div>
    {% else %}
      <img src="{{ url_for('static', filename='IMG/account.svg') }}" alt="Logo konta" class="logo-icon">
      <a href="{{ url_for('login') }}" class="btn">Zaloguj się</a>
      <a href="{{ url_for('register') }}" class="btn btn-outline">Zarejestruj się</a>
    {% endif %}
  </div>
</header>


<main class="upload-section">
  <div class="upload-card">
    <h1>Rejestracja</h1>
    <p class="upload-subtitle">
      Utwórz konto, aby zapisywać wyniki analiz i wracać do historii badań.
    </p>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul style="list-style:none; padding-left:0; margin-bottom:12px;">
          {% for category, message in messages %}
            <li style="font-size:0.9rem; color: {{ 'red' if category=='error' else '#16a34a' }};">
              {{ message }}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

<form class="upload-box" action="{{ url_for('register') }}" method="POST">
  <label class="upload-text" style="align-self:flex-start;">Imię</label>
  <input type="text" name="name" required
         style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #d1d5db; font-family:inherit;">

  <label class="upload-text" style="align-self:flex-start; margin-top:8px;">Adres e-mail</label>
  <input type="email" name="email" required
         style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #d1d5db; font-family:inherit;">

  <label class="upload-text" style="align-self:flex-start; margin-top:8px;">Hasło</label>
  <input type="password" name="password" required
         style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #d1d5db; font-family:inherit;">

  <label class="upload-text" style="align-self:flex-start; margin-top:8px;">Powtórz hasło</label>
  <input type="password" name="password2" required
         style="width:100%; padding:10px 12px; border-radius:12px; border:1px solid #d1d5db; font-family:inherit;">

  <div class="upload-buttons" style="margin-top:16px; justify-content:flex-start;">
    <button type="submit" class="button-login">Załóż konto</button>
    <a href="{{ url_for('login') }}" class="button-check" style="text-decoration:none; display:inline-flex; align-items:center; justify-content:center;">
      Mam już konto
    </a>
  </div>
</form>

  </div>
</main>

<!-- MENU BURGER -->
<div class="menu-overlay" id="menu">
<div class="menu-content">
  <div class="menu-close" onclick="toggleMenu()">&times;</div>
  <a href="{{ url_for('index') }}">STRONA GŁÓWNA</a>
  <a href="{{ url_for('upload') }}">DODAJ ZDJĘCIE</a>
  <a href="{{ url_for('account') }}">MOJE KONTO</a>

  {% if current_user.is_authenticated %}
    <a href="{{ url_for('logout') }}">WYLOGUJ</a>
  {% else %}
    <a href="{{ url_for('login') }}">ZALOGUJ SIĘ</a>
  {% endif %}
</div>
</div>

<div class="blur-overlay" id="blurOverlay" onclick="toggleMenu()"></div>

<script>
  function toggleMenu() {
    const menu = document.getElementById('menu');
    const blurOverlay = document.getElementById('blurOverlay');
    const icon = document.getElementById('menuIcon');

    const isActive = menu.classList.contains('active');

    if (isActive) {
      menu.classList.remove('active');
      blurOverlay.classList.remove('active');
      icon.style.opacity = '1';
    } else {
      menu.classList.add('active');
      blurOverlay.classList.add('active');
      icon.style.opacity = '0.6';
    }
  }
</script>

<footer class="main-footer">
  <div class="footer-inner">
    <span>© 2025 Plec Urszula</span>
    <span> Aplikacja do analizy dna oka pod kątem występowania retynopatii cukrzycowej</span>
  </div>
</footer>

</body>
</html>
